#pragma once
#include "../../context.h"
#include "../../core/config.h"

class CExploits {
public:
	int m_iRechargeCmd{ };
	int m_iShiftAmount{ };
	int m_iServerTickbase{ };

	bool m_bRealCmds{ };
	bool m_bWasDefensiveTick{ };
	//bool m_bAlreadyPeeked{ };
	bool m_bShouldShift{ };
	//bool m_bCharging{ };

	bool ShouldRecharge( );
	int AdjustTickbase( const int total_new_cmds, bool* corrected = nullptr );
	void Shift( bf_write* buf, MoveMsg_t* moveMsg );
	void BreakLC( bf_write* buf, int shift, MoveMsg_t* moveMsg );
	void BreakCBB( bf_write* buf, MoveMsg_t* moveMsg );
};

namespace Features { inline CExploits Exploits; };

#include "ragebot.h"